---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Contacto - Automatizar">
	<main>
		<!-- Hero Section -->
		<section class="hero position-relative">
			<div class="hero-overlay"></div>
			<div class="hero-bg"></div>
			<div class="hero-content">
				<div class="container">
					<h1 class="text-white text-center mb-4">Contacto</h1>
					<p class="text-white text-center lead">
						Estamos aquí para ayudarte con tus proyectos de
						automatización
					</p>
				</div>
			</div>
		</section>

		<div class="container">
			<div class="row justify-content-center">
				<div class="col-md-8">
					<div class="card shadow">
						<div class="card-body p-4">
							<div class="container">
								<h2 class="text-primary">Contacto</h2>
								<form
									class="needs-validation"
									action="https://formspree.io/f/xdoqbwjw"
									method="POST"
								>
									<input
										type="hidden"
										name="_subject"
										value="Nuevo mensaje de contacto desde la web"
									/>
									<input
										type="text"
										name="_gotcha"
										style="display:none"
									/>
									<div class="mb-3">
										<label for="nombre" class="form-label"
											>Nombre</label
										>
										<input
											type="text"
											class="form-control"
											id="nombre"
											name="nombre"
											required
										/>
									</div>
									<div class="mb-3">
										<label for="email" class="form-label"
											>Correo Electrónico</label
										>
										<input
											type="email"
											class="form-control"
											id="email"
											name="email"
											required
										/>
									</div>
									<div class="mb-3">
										<label for="mensaje" class="form-label"
											>Mensaje</label
										>
										<textarea
											class="form-control"
											id="mensaje"
											name="mensaje"
											rows="3"
											required></textarea>
									</div>
									<div id="result" class="mt-3"></div>
									<button
										type="submit"
										class="btn btn-secondary"
									>
										Enviar
									</button>
								</form>
							</div>
						</div>
					</div>
				</div>

				<div class="col-md-4">
					<div class="contact-info mt-4 mt-md-0">
						<div class="card shadow mb-4">
							<div class="card-body">
								<h3
									class="h5 mb-4"
									style="color: var(--primary-color);"
								>
									Información de Contacto
								</h3>
								<div class="d-flex mb-3">
									<i
										class="fas fa-phone me-3"
										style="color: var(--primary-color);"
									></i>
									<div>
										<h4 class="h6 mb-1">Teléfonos</h4>
										<p class="mb-1">
											<i
												style="color: var(--primary-color);"
											></i>
											<a
												href="https://wa.me/5493492226054?text=Hola%20automatizAR,%20soy%20( ),%20quería%20hacerte%20una%20consulta."
												class="text-primary"
												>Luciano: +54 9 3492 22-6054</a
											>
										</p>
										<p class="mb-1">
											<i
												style="color: var(--primary-color);"
											></i>
											<a
												href="https://wa.me/5493492620419?text=Hola%20automatizAR,%20soy%20( ),%20quería%20hacerte%20una%20consulta."
												class="text-primary"
												>Emanuel: +54 9 3492 62-0419</a
											>
										</p>
										<p class="mb-1">
											<i
												style="color: var(--primary-color);"
											></i>
											<a
												href="https://wa.me/5493492328782?text=Hola%20automatizAR,%20soy%20( ),%20quería%20hacerte%20una%20consulta."
												class="text-primary"
												>Nicolás: +54 9 3492 32-8782</a
											>
										</p>
									</div>
								</div>
								<div class="d-flex mb-3">
									<i
										class="fas fa-envelope me-3"
										style="color: var(--primary-color);"
									></i>
									<div>
										<h4 class="h6 mb-1">Email</h4>
										<p class="mb-0">
											automatizar.sa@gmail.com
										</p>
									</div>
								</div>
								<div class="d-flex">
									<i
										class="fas fa-map-marker-alt me-3"
										style="color: var(--primary-color);"
									></i>
									<div>
										<h4 class="h6 mb-1">Ubicación</h4>
										<p class="mb-0">
											Rafaela, Santa Fe. Argentina
										</p>
									</div>
								</div>
							</div>
						</div>

						<div class="card shadow">
							<div class="card-body">
								<h3
									class="h5 mb-4"
									style="color: var(--primary-color);"
								>
									Horario de Atención
								</h3>
								<div
									class="d-flex justify-content-between mb-2"
								>
									<span>Lunes - Viernes:</span>
									<span>8:00 - 18:00</span>
								</div>
								<div class="d-flex justify-content-between">
									<span>Sábados y Domingos:</span>
									<span>8:00 - 13:00</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</main>
</Layout>

<script is:inline>
	document.addEventListener("DOMContentLoaded", function () {
		const form = document.querySelector(".needs-validation");
		const result = document.getElementById("result");

		if (form && result) {
			form.addEventListener("submit", async function (event) {
				event.preventDefault();
				event.stopPropagation();

				if (!form.checkValidity()) {
					form.classList.add("was-validated");
					form.querySelectorAll(":invalid")[0].focus();
					return;
				}

				// Obtener los valores del formulario
				const formData = new FormData(form);
				const data = {
					nombre: formData.get("nombre"),
					email: formData.get("email"),
					mensaje: formData.get("mensaje"),
				};

				// Mostrar mensaje de carga
				result.innerHTML = "Enviando mensaje...";
				result.className = "alert alert-info mt-3";
				result.style.display = "block";

				try {
					const response = await fetch(
						"https://formspree.io/f/xdoqbwjw",
						{
							method: "POST",
							headers: {
								"Content-Type": "application/json",
								Accept: "application/json",
							},
							body: JSON.stringify(data),
						},
					);

					if (response.ok) {
						result.innerHTML =
							"¡Mensaje enviado con éxito! Nos pondremos en contacto contigo pronto.";
						result.className = "alert alert-success mt-3";
						form.reset();
						form.classList.remove("was-validated");
					} else {
						throw new Error("Error en el envío del formulario");
					}
				} catch (error) {
					console.error("Error:", error);
					result.innerHTML =
						"Hubo un error al enviar el mensaje. Por favor, inténtalo de nuevo más tarde.";
					result.className = "alert alert-danger mt-3";
				} finally {
					setTimeout(() => {
						result.style.display = "none";
					}, 10000);
				}
			});
		}
	});
</script>

<style>
	.hero {
		position: relative;
		background-color: var(--primary-color);
		height: 300px;
		display: flex;
		align-items: center;
		justify-content: center;
		overflow: hidden;
	}

	.hero::before {
		content: "";
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		opacity: 0.2;
	}

	.hero-content {
		position: relative;
		z-index: 1;
	}

	.form-label {
		color: var(--primary-color);
		font-weight: 500;
	}

	.form-control {
		border: 1px solid rgba(17, 60, 105, 0.2);
		transition: all 0.3s ease;
	}

	.form-control:focus {
		border-color: var(--secondary-color);
		box-shadow: 0 0 0 0.25rem rgba(62, 125, 218, 0.25);
	}

	.card {
		border: none;
		transition: transform 0.3s ease;
	}

	.contact-info .card:hover {
		transform: translateY(-5px);
	}

	@media (max-width: 768px) {
		.hero {
			height: 200px;
		}
	}
</style>
